(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[707],{4975:function(e,s,t){Promise.resolve().then(t.t.bind(t,5962,23)),Promise.resolve().then(t.bind(t,5268))},5268:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var n=t(9268),r=t(6006),i=t(9700),o=t(6008),a=t(5513),l=t(474);function d(){let[e,s]=(0,r.useState)("LOGIN"),[t,d]=(0,r.useState)(!1),c=(0,o.useRouter)(),{register:u,handleSubmit:m,watch:g,formState:{errors:f}}=(0,i.cI)({defaultValues:{name:"",password:"",email:""}}),h=async t=>{if(d(!0),"REGISTER"===e){if(!t)return null;try{let e=await fetch("".concat("https://messengerapp-27vj.onrender.com","/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});200===e.status?(s("LOGIN"),l.Am.success("Account created successfully")):l.Am.error("An error occurred")}catch(e){l.Am.error("An error occurred")}d(!1)}if("LOGIN"===e){if(!t)return null;try{let e=await (0,a.Z)("".concat("https://messengerapp-27vj.onrender.com","/api/auth/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await e.json();200===e.status?(sessionStorage.setItem("tokenjwt",s.token),l.Am.success("Login successful"),c.push("/home"),c.push("/home")):l.Am.error("An error occurred")}catch(e){l.Am.error("An error occurred")}d(!1)}};return(0,n.jsxs)("form",{className:"mt-10  mx-3 sm:mx-auto sm:w-full sm:max-w-sm flex flex-col gap-y-4",onSubmit:m(h),children:["REGISTER"===e&&(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900",children:"Name"}),(0,n.jsx)("div",{children:(0,n.jsx)("input",{id:"name",type:"text",minLength:6,required:!0,disabled:t,...u("name"),className:"block w-full rounded-md border-0 px-2 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Email address"}),(0,n.jsx)("div",{children:(0,n.jsx)("input",{id:"email",disabled:t,...u("email"),type:"email",required:!0,className:"block w-full rounded-md border-0 px-2 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Password"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("input",{id:"password",disabled:t,minLength:8,maxLength:12,...u("password"),type:"password",required:!0,className:"block w-full rounded-md border-0 py-1.5 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",disabled:t,className:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"LOGIN"===e?"Sign In":"Sign Up"})}),(0,n.jsx)("div",{onClick:()=>{"LOGIN"===e?s("REGISTER"):s("LOGIN")},className:"underline cursor-pointer text-sm text-center underline-offset-4",children:"LOGIN"===e?"New to Messenger? Create an account":"Already have an account? Sign in"})]})}},5513:function(e,s,t){"use strict";function n(e,s){return fetch(e,function(e){let s={...e};return sessionStorage.getItem("tokenjwt")&&(s.headers={...s.headers,Authorization:"Bearer ".concat(sessionStorage.getItem("tokenjwt"))}),s}(s))}t.d(s,{Z:function(){return n}})}},function(e){e.O(0,[188,197,253,769,744],function(){return e(e.s=4975)}),_N_E=e.O()}]);