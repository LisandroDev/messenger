(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[707],{4975:function(e,t,n){Promise.resolve().then(n.t.bind(n,5962,23)),Promise.resolve().then(n.bind(n,5268))},5268:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n(9268),i=n(6006),r=n(9700),o=n(6008),a=n(5513);function l(){let[e,t]=(0,i.useState)("LOGIN"),n=(0,o.useRouter)(),{register:l,handleSubmit:d,watch:c,formState:{errors:u}}=(0,r.cI)({defaultValues:{name:"",password:"",email:""}}),m=async t=>{if("REGISTER"===e){if(!t)return null;let e=await fetch("".concat("https://messengerapp-27vj.onrender.com","/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});console.log(e.json())}if("LOGIN"===e){if(!t)return null;try{let e=await (0,a.Z)("".concat("https://messengerapp-27vj.onrender.com","/api/auth/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await e.json();200===e.status&&(sessionStorage.setItem("tokenjwt",s.token),n.push("/home"),n.push("/home"))}catch(e){console.error(e),console.error("Fail at login")}}};return(0,s.jsxs)("form",{className:"mt-10  mx-3 sm:mx-auto sm:w-full sm:max-w-sm flex flex-col gap-y-4",onSubmit:d(m),children:["REGISTER"===e&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900",children:"Name"}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{id:"name",type:"text",required:!0,...l("name"),className:"block w-full rounded-md border-0 px-2 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Email address"}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{id:"email",...l("email"),type:"email",required:!0,className:"block w-full rounded-md border-0 px-2 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Password"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("input",{id:"password",...l("password"),type:"password",required:!0,className:"block w-full rounded-md border-0 py-1.5 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"LOGIN"===e?"Sign In":"Sign Up"})}),(0,s.jsx)("div",{onClick:()=>{"LOGIN"===e?t("REGISTER"):t("LOGIN")},className:"underline cursor-pointer text-sm text-center underline-offset-4",children:"LOGIN"===e?"New to Messenger? Create an account":"Already have an account? Sign in"})]})}},5513:function(e,t,n){"use strict";function s(e,t){return fetch(e,function(e){let t={...e};return sessionStorage.getItem("tokenjwt")&&(t.headers={...t.headers,Authorization:"Bearer ".concat(sessionStorage.getItem("tokenjwt"))}),t}(t))}n.d(t,{Z:function(){return s}})}},function(e){e.O(0,[188,700,253,769,744],function(){return e(e.s=4975)}),_N_E=e.O()}]);